<!--Si el formario es visible, aparece-->
<div *ngIf="isVisible"
    (mousedown)="closeModal()"
    class="modal-backdrop">
    <div 
    (mousedown)="$event.stopPropagation()"
    class="relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl sm:max-w-4xl md:max-w-5xl 
               overflow-hidden animate-fadeIn flex flex-col 
               h-auto max-h-[90vh] sm:h-[85vh] 
               overflow-y-auto mt-4 mb-4">
                    
        <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl font-bold leading-none z-10" 
        (click)="closeModal()">&times;</button>

        <form [formGroup]="eventForm" id="news_form" class="flex flex-col gap-4 p-6"
        (ngSubmit)="onSubmit()"> 
            <h2 class="text-2xl sm:text-3xl font-extrabold text-emerald-700 mb-8">Editar Evento</h2>
            <p>*Título: </p><input type="text" formControlName="title" placeholder="Título de la noticia." required class="input-news" />
            <p>*Fecha: </p><input type="date" formControlName="date" placeholder="dd/mm/yyyy" required class="input-news" />
            <p>Contenido: </p><input type="text" formControlName="content" placeholder="Autor de la noticia." class="input-news" />
            <!-- Formulario de imagen -->
            <p>*Imágenes: </p>
            <p class="text-sm text-red-600">Para subir varias imágenes, seleccionarlas desde el explorador y pulsar en "Subir".</p>
            <img [src]="'assets/tutorial/tutorial_event.png'"/>
            <p>Subir nueva imagen: </p> 
            <span class="text-sm text-gray-600">Formatos admitidos: .png, .jpg, .jpeg</span>
            <input id="file-upload" class="hidden" (change)="onFileSelected($event)"
            type="file" multiple accept="image/png, image/jpeg, .png, .jpg"/>
            <label for="file-upload" 
                class="cursor-pointer inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md border border-gray-300 hover:bg-gray-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                </svg>
                Añadir archivo
            </label>
            <p>Borrar una imagen: </p> 
            <app-event-edit-image-item
            *ngFor="let fn of fileNames"
            [eventItem]="eventItem"
            [deletedImageName]="fn"
            [selectedFiles]="selectedFiles"
            [fileNames]="fileNames"
            [fileTypes]="fileTypes"
            ></app-event-edit-image-item>

            
            <p *ngIf="errorActive"
            id="errorMessage" 
            class="text-sm text-red-600 mt-2">{{errorMessage}}</p>

            <button 
                (mousedown)="onSubmit()"
                type="submit"
                class="w-full inline-flex items-center justify-center px-4 py-2 sm:px-5 sm:py-10 text-xl font-semibold text-white bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-700 hover:to-cyan-700 rounded-lg transition-all duration-300 transform hover:scale-102 hover:shadow-lg">
                Editar Evento
            </button>
        </form>
    </div>
</div>